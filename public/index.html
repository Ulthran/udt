<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ultimate Stats</title>
</head>
<body>
  <h1>Ultimate Frisbee Stats</h1>
  <textarea id="text" rows="4" cols="50" placeholder="Speak or type here"></textarea><br>
  <button id="start">Start Voice</button>
  <button id="stop">Stop Voice</button>
  <button id="send">Send</button>
  <pre id="output"></pre>
<script>
const textArea = document.getElementById('text');
const output = document.getElementById('output');
let recognition;
if ('webkitSpeechRecognition' in window) {
  recognition = new webkitSpeechRecognition();
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    textArea.value = transcript;
  };
}

document.getElementById('start').onclick = () => recognition && recognition.start();
document.getElementById('stop').onclick = () => recognition && recognition.stop();

document.getElementById('send').onclick = async () => {
  const text = textArea.value;
  const res = await fetch('/api/process', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ text })
  });
  const data = await res.json();
  output.textContent = JSON.stringify(data, null, 2);
};
</script>
</body>
</html>
